import{d as f,o,c as V,w as i,a as d,e as l,t as r,b as m,h as p,F as u,g as c,i as g,n as C,f as _}from"./index-Br9qntu-.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as k,a as h,b as I,c as $,e as b}from"./forwardRefs-B4cOXIfo.js";import{V as y}from"./VDialog-CaCeG4bo.js";const F=f({name:"MenuItemVariationPopup",props:{modelValue:{type:Boolean,default:!1},menuItem:{type:Object,required:!0}},emits:["update:modelValue","selected"],data:()=>({missingFields:[],selectedOptions:{}}),methods:{onOptionSelected(e,t){this.selectedOptions[e]&&this.selectedOptions[e].name===t.name?delete this.selectedOptions[e]:this.selectedOptions={...this.selectedOptions,[e]:t}},onChanged(e){this.missingFields=[],this.selectedOptions={},this.$emit("update:modelValue",e)},onCompleted(){if(this.missingFields=this.menuItem.variations.reduce((t,s)=>s.required&&!this.selectedOptions[s.name]?[...t,s.name]:t,[]),this.missingFields.length>0)return;const e=this.menuItem.variations.reduce((t,s)=>this.selectedOptions[s.name]?{...t,[s.name]:this.selectedOptions[s.name]}:t,{});this.$emit("selected",e)}}}),B={class:"dialog-title__text"},S={class:"dialog-title__actions"},q={class:"variation-table"},z={class:"option-box"},D=["onClick"],M={class:"text-right mt-3"};function P(e,t,s,T,w,U){return o(),V(y,{class:"popup-dialog",height:"100%",modelValue:e.modelValue,"onUpdate:modelValue":e.onChanged},{default:i(()=>[d(b,{height:"100%"},{default:i(()=>[d(k,null,{default:i(()=>[l("div",B,r(e.menuItem.name),1),l("div",S,[d(h,{class:"btn-close",onClick:t[0]||(t[0]=n=>e.onChanged(!1))},{default:i(()=>[d(I,{icon:"mdi-close"})]),_:1})])]),_:1}),d($,null,{default:i(()=>[l("table",q,[(o(!0),m(u,null,p(e.menuItem.variations,n=>(o(),m("tr",{style:g({backgroundColor:e.missingFields.includes(n.name)?"lightpink":""})},[l("th",null,r(n.name)+r(n.required?"*":""),1),l("td",null,[l("div",z,[(o(!0),m(u,null,p(n.options,a=>(o(),m("div",{class:C(["option-button",{selected:e.selectedOptions[n.name]===a}]),onClick:j=>e.onOptionSelected(n.name,a)},[c(r(a.name)+" ",1),a.price>0?(o(),m(u,{key:0},[c("($"+r(a.price)+")",1)],64)):_("",!0)],10,D))),256))])])],4))),256))]),l("div",M,[d(h,{color:"primary",onClick:e.onCompleted},{default:i(()=>t[1]||(t[1]=[c("Done")])),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])}const x=O(F,[["render",P],["__scopeId","data-v-7f0dedfe"]]);export{x as default};
