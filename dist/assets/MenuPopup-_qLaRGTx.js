import{u as d}from"./app-BO9jPJId.js";import{d as m,o as i,b as l,a as t,w as o,e as n,t as r,F as u,i as p}from"./index-C7XOyTba.js";import{_ as c}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{e as h,V as f,a as V,b as _,c as g}from"./forwardRefs-DXm5PALB.js";import{V as C}from"./VDialog-0-slnfx6.js";const $=m({name:"MenuPopup",props:{modelValue:{type:Boolean,default:!1},title:{type:String,required:!0}},emits:["update:modelValue","selected","close"],data(){return{menuName:this.title,itemList:[]}},computed:{appStore:()=>d(),menu:()=>d().menu},watch:{modelValue(e){e&&(this.menuName=this.title,this.itemList=this.menu[this.menuName])}},methods:{tapOnMenuItem(e){e.type==="folder"?(this.menuName=e.name,this.itemList=e.children):(this.addItemToBill(e),this.$emit("selected",e))},onChanged(e){this.$emit("update:modelValue",e),e===!1&&this.$emit("close")},addItemToBill(e){const a=this.appStore.getClipboardNumber(1);a>0&&this.appStore.addItemToCurrentBill({name:e.name,price:e.price,qty:a}),this.appStore.clearClipboard(),this.$emit("close")}}}),B={class:"dialog-title__text"},N={class:"dialog-title__actions"},b={class:"menu-folder"},y=["onClick"];function I(e,a,S,k,v,L){return i(),l("div",null,[t(C,{class:"popup-dialog",height:"100%",modelValue:e.modelValue,"onUpdate:modelValue":e.onChanged},{default:o(()=>[t(h,{height:"100%"},{default:o(()=>[t(f,null,{default:o(()=>[n("div",B,r(e.menuName),1),n("div",N,[t(V,{class:"btn-close",onClick:a[0]||(a[0]=s=>e.onChanged(!1)),density:"compact"},{default:o(()=>[t(_,{icon:"mdi-close"})]),_:1})])]),_:1}),t(g,{style:{"background-color":"#efefef"}},{default:o(()=>[n("div",b,[(i(!0),l(u,null,p(e.itemList,s=>(i(),l("div",{class:"menu-item",onClick:()=>e.tapOnMenuItem(s)},r(s.name),9,y))),256))])]),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])}const D=c($,[["render",I],["__scopeId","data-v-2da50970"]]);export{D as default};
