import{_ as m}from"./BillItemTable-DKRvyCE3.js";import{u as R}from"./app-C9XeV3KS.js";import{d as f,o,c as h,w as p,a,e as t,b as d,i as g,F as V,t as s,f as r,g as v,n as _}from"./index-CUKRNm-w.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as C,a as u,b as T,e as b}from"./forwardRefs-CRM_JsiM.js";import{V as k}from"./VDialog-BukSIMyR.js";const y=f({name:"ReceiptPopup",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","close"],data:()=>({selectedReceipt:null}),computed:{receiptList:()=>R().previousReceipt},watch:{modelValue(e){e||(this.selectedReceipt=null)}},methods:{onChanged(e){this.$emit("update:modelValue",e)},getReceiptTotal(e){return e.itemList.reduce((l,i)=>l+i.price*i.qty,0)},mapToBillTableData(e){return e.reduce((l,i)=>({...l,[i.name]:i}),{})}}}),B={class:"dialog-title__actions"},F={class:"receipt-popup"},N={class:"receipt-list"},L=["onClick"],D={key:0,class:"receipt-details"},P={class:"receipt-details__content"},w={class:"charge-info"},I={key:0},S={key:1},E={key:2},O={class:"receipt-details__actions"};function U(e,l,i,q,z,A){const c=m;return o(),h(k,{class:"popup-dialog",modelValue:e.modelValue,"onUpdate:modelValue":e.onChanged,height:"100%"},{default:p(()=>[a(b,{height:"100%"},{default:p(()=>[a(C,null,{default:p(()=>[l[1]||(l[1]=t("div",{class:"dialog-title__text"},"Receipt",-1)),t("div",B,[a(u,{class:"btn-close",onClick:l[0]||(l[0]=n=>e.$emit("close"))},{default:p(()=>[a(T,{icon:"mdi-close"})]),_:1})])]),_:1}),t("div",F,[t("div",N,[(o(!0),d(V,null,g(e.receiptList,n=>(o(),d("div",{class:_({"receipt-item":!0,selected:e.selectedReceipt===n}),onClick:j=>e.selectedReceipt=n},[t("div",null,[t("strong",null,"Receipt #"+s(n.receiptNumber),1)]),t("div",null,"Total: $"+s(e.getReceiptTotal(n).toFixed(2)),1)],10,L))),256))]),e.selectedReceipt?(o(),d("div",D,[t("div",P,[t("p",null,[t("strong",null,"Receipt #"+s(e.selectedReceipt.receiptNumber),1)]),a(c,{items:e.mapToBillTableData(e.selectedReceipt.itemList)},null,8,["items"]),t("table",w,[t("tbody",null,[t("tr",null,[l[2]||(l[2]=t("th",null,"Total:",-1)),t("td",null,"$"+s(e.getReceiptTotal(e.selectedReceipt).toFixed(2)),1)]),e.selectedReceipt.voucher>0?(o(),d("tr",I,[l[3]||(l[3]=t("th",null,"Other payment:",-1)),t("td",null,"$"+s(e.selectedReceipt.voucher.toFixed(2)),1)])):r("",!0),e.selectedReceipt.cash>0?(o(),d("tr",S,[l[4]||(l[4]=t("th",null,"Cash:",-1)),t("td",null,"$"+s(e.selectedReceipt.cash.toFixed(2)),1)])):r("",!0),e.selectedReceipt.eftpos>0?(o(),d("tr",E,[l[5]||(l[5]=t("th",null,"EFTPOS:",-1)),t("td",null,"$"+s(e.selectedReceipt.eftpos.toFixed(2)),1)])):r("",!0),t("tr",null,[l[6]||(l[6]=t("th",null,"Change:",-1)),t("td",null,"$"+s(e.selectedReceipt.change.toFixed(2)),1)])])])]),t("div",O,[a(u,{color:"primary"},{default:p(()=>l[7]||(l[7]=[v("Reprint")])),_:1})])])):r("",!0)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])}const W=$(y,[["render",U],["__scopeId","data-v-d584ad04"]]);export{W as default};
