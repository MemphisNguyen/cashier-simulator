import{_ as m}from"./BillItemTable-7TIysEFy.js";import{u as R}from"./app-DnzmmtuR.js";import{d as f,o,c as h,w as p,a,e as t,b as i,h as g,F as V,t as s,f as r,g as v,n as b}from"./index-ZGvUUgVD.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as $,a as u,b as C,e as T}from"./forwardRefs-8bab2Th6.js";import{V as k}from"./VDialog-DHugggH1.js";const y=f({name:"ReceiptPopup",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","close"],data:()=>({selectedReceipt:null}),computed:{receiptList:()=>R().previousReceipt},watch:{modelValue(e){e||(this.selectedReceipt=null)}},methods:{onChanged(e){this.$emit("update:modelValue",e)},getReceiptTotal(e){return e.itemList.reduce((l,d)=>l+d.price*d.qty,0)},mapToBillTableData(e){return e.reduce((l,d)=>({...l,[d.name]:d}),{})}}}),B={class:"dialog-title__actions"},F={class:"receipt-popup"},N={class:"receipt-list"},z=["onClick"],L={key:0,class:"receipt-details"},D={class:"receipt-details__content"},P={key:0},w={class:"charge-info"},I={key:0},S={key:1},E={key:2},O={class:"receipt-details__actions"};function U(e,l,d,q,A,j){const c=m;return o(),h(k,{class:"popup-dialog",modelValue:e.modelValue,"onUpdate:modelValue":e.onChanged,height:"100%"},{default:p(()=>[a(T,{height:"100%"},{default:p(()=>[a($,null,{default:p(()=>[l[1]||(l[1]=t("div",{class:"dialog-title__text"},"Receipt",-1)),t("div",B,[a(u,{class:"btn-close",onClick:l[0]||(l[0]=n=>e.$emit("close"))},{default:p(()=>[a(C,{icon:"mdi-close"})]),_:1})])]),_:1}),t("div",F,[t("div",N,[(o(!0),i(V,null,g(e.receiptList,n=>(o(),i("div",{class:b({"receipt-item":!0,selected:e.selectedReceipt===n}),onClick:G=>e.selectedReceipt=n},[t("div",null,[t("strong",null,"Receipt #"+s(n.receiptNumber),1)]),t("div",null,"Total: $"+s(e.getReceiptTotal(n).toFixed(2)),1)],10,z))),256))]),e.selectedReceipt?(o(),i("div",L,[t("div",D,[t("p",null,[t("strong",null,"Receipt #"+s(e.selectedReceipt.receiptNumber),1)]),e.selectedReceipt.buzzerNumber!=null?(o(),i("p",P,"Buzzer #"+s(e.selectedReceipt.buzzerNumber),1)):r("",!0),a(c,{items:e.mapToBillTableData(e.selectedReceipt.itemList)},null,8,["items"]),t("table",w,[t("tbody",null,[t("tr",null,[l[2]||(l[2]=t("th",null,"Total:",-1)),t("td",null,"$"+s(e.getReceiptTotal(e.selectedReceipt).toFixed(2)),1)]),e.selectedReceipt.voucher>0?(o(),i("tr",I,[l[3]||(l[3]=t("th",null,"Other payment:",-1)),t("td",null,"$"+s(e.selectedReceipt.voucher.toFixed(2)),1)])):r("",!0),e.selectedReceipt.cash>0?(o(),i("tr",S,[l[4]||(l[4]=t("th",null,"Cash:",-1)),t("td",null,"$"+s(e.selectedReceipt.cash.toFixed(2)),1)])):r("",!0),e.selectedReceipt.eftpos>0?(o(),i("tr",E,[l[5]||(l[5]=t("th",null,"EFTPOS:",-1)),t("td",null,"$"+s(e.selectedReceipt.eftpos.toFixed(2)),1)])):r("",!0),t("tr",null,[l[6]||(l[6]=t("th",null,"Change:",-1)),t("td",null,"$"+s(e.selectedReceipt.change.toFixed(2)),1)])])])]),t("div",O,[a(u,{color:"primary"},{default:p(()=>l[7]||(l[7]=[v("Reprint")])),_:1})])])):r("",!0)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])}const X=_(y,[["render",U],["__scopeId","data-v-9db1b116"]]);export{X as default};
