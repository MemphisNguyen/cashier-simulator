import{O as l}from"./index-ZGvUUgVD.js";const u=l("app",{state:()=>({currentBill:{tableName:"",buzzerNumber:void 0,itemList:{}},selectedBillItem:null,menu:{},clipboard:{type:"",value:""},tableList:{},accummulatedCash:0,voucherCharge:0,previousReceipt:[]}),getters:{totalCurrentBill(){return Object.values(this.currentBill.itemList).reduce((e,t)=>e+t.price*t.qty,0)},eftposCharge(){const e=this.totalCurrentBill-this.voucherCharge-this.accummulatedCash;return e>0?e:0},totalCharge(){return this.voucherCharge+this.accummulatedCash+this.eftposCharge}},actions:{setCurrentBill(e){this.currentBill=e},setSelectedBillItem(e){this.selectedBillItem=e},setMenu(e){this.menu=e},setClipboard(e,t){this.clipboard={type:e,value:t}},clearClipboard(){this.clipboard={type:"",value:""}},addItemToCurrentBill(e){const t=[e.name,...e.variation??[]].join("|");this.currentBill.itemList[t]?(this.currentBill.itemList[t].qty+=e.qty,this.currentBill.itemList={...this.currentBill.itemList}):this.currentBill.itemList={...this.currentBill.itemList,[t]:{qty:e.qty,name:e.name,price:e.price,variation:e.variation}}},getClipboardNumber(e){return parseFloat(this.clipboard.value)||e||0},removeSelectedItemFromCurrentBill(){this.selectedBillItem&&(delete this.currentBill.itemList[this.selectedBillItem],this.selectedBillItem=null)},toggleSelectBillItem(e){this.selectedBillItem=this.selectedBillItem===e.name?null:e.name},setTable(e){this.tableList=e},addTable(e,t,i,r){this.tableList[e]={tableName:e,customerName:t,buzzerNumber:r,itemList:i??{}}},chargeToTable(e){this.currentBill.tableName?(this.tableList[e].itemList=this.currentBill.itemList,this.currentBill.buzzerNumber!=null&&(this.tableList[e].buzzerNumber=this.currentBill.buzzerNumber)):this.tableList[e]={tableName:e,customerName:this.tableList[e].customerName,buzzerNumber:this.currentBill.buzzerNumber,itemList:Object.keys(this.currentBill.itemList).reduce((t,i)=>(t[i]?t[i].qty+=this.currentBill.itemList[i].qty:t[i]={qty:this.currentBill.itemList[i].qty,name:this.currentBill.itemList[i].name,price:this.currentBill.itemList[i].price,variation:this.currentBill.itemList[i].variation},t),this.tableList[e].itemList)},this.currentBill={tableName:"",customerName:"",itemList:{}}},addCash(e){this.accummulatedCash+=e},resetAccummulatedCash(){this.accummulatedCash=0},setVoucherCharge(e){this.voucherCharge=e},endSale(){this.previousReceipt.unshift({receiptNumber:(+new Date).toString(),buzzerNumber:this.currentBill.buzzerNumber,itemList:Object.values(this.currentBill.itemList),cash:this.accummulatedCash,voucher:this.voucherCharge,eftpos:this.eftposCharge,change:this.totalCharge-this.totalCurrentBill}),this.resetAccummulatedCash(),this.voucherCharge=0,this.currentBill.tableName&&this.removeTable(this.currentBill.tableName),this.currentBill={tableName:"",customerName:"",itemList:{}},this.clearClipboard()},setReceipt(e){this.previousReceipt=e},removeTable(e){delete this.tableList[this.currentBill.tableName]},setCurrentBuzzer(e){this.currentBill.buzzerNumber=e}}});export{u};
