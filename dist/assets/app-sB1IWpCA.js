import{N as s}from"./index-DoTamfAA.js";function r(t){return[t.name,...t.variation??[]].join("|")}const a=s("app",{state:()=>({currentBill:{tableName:"",buzzerNumber:void 0,itemList:{}},selectedBillItem:null,menu:{},clipboard:{type:"",value:""},tableList:{},accummulatedCash:0,voucherCharge:0,previousReceipt:[]}),getters:{totalCurrentBill(){return Object.values(this.currentBill.itemList).reduce((t,e)=>t+e.price*e.qty,0)},eftposCharge(){const t=this.totalCurrentBill-this.voucherCharge-this.accummulatedCash;return t>0?t:0},totalCharge(){return this.voucherCharge+this.accummulatedCash+this.eftposCharge}},actions:{setCurrentBill(t){this.currentBill=t},setSelectedBillItem(t){this.selectedBillItem=t},setMenu(t){this.menu=t},setClipboard(t,e){this.clipboard={type:t,value:e}},clearClipboard(){this.clipboard={type:"",value:""}},addItemToCurrentBill(t){const e=r(t);this.currentBill.itemList[e]?(this.currentBill.itemList[e].qty+=t.qty,this.currentBill.itemList={...this.currentBill.itemList}):this.currentBill.itemList={...this.currentBill.itemList,[e]:{qty:t.qty,name:t.name,price:t.price,variation:t.variation}}},getClipboardNumber(t){return parseFloat(this.clipboard.value)||t||0},removeSelectedItemFromCurrentBill(){this.selectedBillItem&&(delete this.currentBill.itemList[this.selectedBillItem],this.selectedBillItem=null)},toggleSelectBillItem(t){const e=r(t);this.selectedBillItem=this.selectedBillItem===e?null:e},setTable(t){this.tableList=t},addTable(t,e,i,l){this.tableList[t]={tableName:t,customerName:e,buzzerNumber:l,itemList:i??{}}},chargeToTable(t){this.currentBill.tableName?(this.tableList[t].itemList=this.currentBill.itemList,this.currentBill.buzzerNumber!=null&&(this.tableList[t].buzzerNumber=this.currentBill.buzzerNumber)):this.tableList[t]={tableName:t,customerName:this.tableList[t].customerName,buzzerNumber:this.currentBill.buzzerNumber,itemList:Object.keys(this.currentBill.itemList).reduce((e,i)=>(e[i]?e[i].qty+=this.currentBill.itemList[i].qty:e[i]={qty:this.currentBill.itemList[i].qty,name:this.currentBill.itemList[i].name,price:this.currentBill.itemList[i].price,variation:this.currentBill.itemList[i].variation,note:this.currentBill.itemList[i].note},e),this.tableList[t].itemList)},this.currentBill={tableName:"",customerName:"",itemList:{}}},addCash(t){this.accummulatedCash+=t},resetAccummulatedCash(){this.accummulatedCash=0},setVoucherCharge(t){this.voucherCharge=t},endSale(){this.previousReceipt.unshift({receiptNumber:(+new Date).toString(),buzzerNumber:this.currentBill.buzzerNumber,itemList:Object.values(this.currentBill.itemList),cash:this.accummulatedCash,voucher:this.voucherCharge,eftpos:this.eftposCharge,change:this.totalCharge-this.totalCurrentBill}),this.resetAccummulatedCash(),this.voucherCharge=0,this.currentBill.tableName&&this.removeTable(this.currentBill.tableName),this.currentBill={tableName:"",customerName:"",itemList:{}},this.clearClipboard()},setReceipt(t){this.previousReceipt=t},removeTable(t){delete this.tableList[this.currentBill.tableName]},setCurrentBuzzer(t){this.currentBill.buzzerNumber=t}}});export{r as g,a as u};
